O desenvolvimento do circuito da miniestufa inteligente partiu da definição de uma alimentação estável e segura para todos os componentes. A entrada principal de energia ocorre por meio de um conector micro USB fêmea, o qual recebe 5 V provenientes de uma fonte externa. Esse ponto inicial é protegido por um fusível, que atua como barreira de segurança contra sobrecorrentes, garantindo maior confiabilidade ao sistema.  

Em seguida, adicionou-se um capacitor eletrolítico de 1000 µF que tem a função de filtrar e estabilizar a tensão, reduzindo variações provenientes da fonte. Esse barramento de 5 V passa a ser o ponto central de distribuição de energia, dividido em duas linhas principais: uma destinada ao circuito de potência, responsável pelo acionamento da bomba de água, e outra destinada ao circuito de sensoriamento, que inclui a ESP32 e os sensores ambientais. 

- Circuito de Potência:
  O circuito de potência é constituído pelo módulo TB6612FNG, que atua como ponte H no controle da minibomba de água modelo JT100. O módulo recebe diretamente o barramento de 5 V no pino VM, responsável pela alimentação do motor, enquanto o pino VCC é conectado ao barramento de 3,3 V fornecido pela ESP32, adequando o nível lógico de operação. Para garantir estabilidade, foram adicionados capacitores de 100 µF e 0,1 µF (eletrolítico e cerâmico) próximos ao módulo, filtrando ruídos de alta frequência. 

  O controle da bomba é realizado pela comunicação entre a ESP32 e os pinos de entrada do TB6612FNG. Os pinos AIN1 e AIN2 foram conectados às portas digitais 25 e 27 da ESP32, permitindo definir o status da bomba (ligada ou desligada). O pino PWMA (Pulse Width Modulation), responsável pela modulação por largura de pulso, foi ligado diretamente ao barramento de 3,3 V, de forma a manter a bomba sempre em rotação máxima, sem variação de velocidade. De maneira semelhante, o pino STBY, que habilita ou desabilita a ponte H, também foi ligado permanentemente ao 3,3 V, assegurando que o driver permaneça sempre ativo. Essa configuração simplificou o circuito, pois eliminou a necessidade de controle dinâmico desses sinais pela ESP32, concentrando o acionamento apenas nos pinos lógicos AIN1 e AIN2. 

- Circuito de Sensoriamento:
  No segundo ramo do barramento de 5 V foi conectada a placa ESP32. Para a alimentação, optou-se por adaptar um cabo USB macho diretamente à entrada micro-USB do módulo, aproveitando tanto o regulador interno de tensão quanto os circuitos de proteção já integrados à placa. Dessa forma, a ESP32 recebe 5 V na entrada, enquanto seu regulador linear fornece 3,3 V estáveis para o barramento de sensoriamento. 

  Nesse barramento de 3,3 V foram interligados os sensores responsáveis pela leitura das variáveis ambientais. O sensor DHT22 realiza a medição de temperatura e umidade do ar, conectado ao pino D4 (linha de dados) e estabilizado por um resistor pull-up de 10 kΩ. O sensor capacitivo de umidade do solo (versão 1.2) fornece saída analógica conectada ao pino D34, enquanto o LDR forma um divisor de tensão com um resistor de 10 kΩ, tendo sua leitura captada no pino D33. 

  Essa configuração, representada na Figura 20, garante que todos os sensores operem na mesma referência de 3,3 V, isolando o circuito de sensoriamento do barramento de potência utilizado pela bomba d’água. Tal separação reduz interferências eletromagnéticas, evita flutuações de tensão sobre os pinos lógicos da ESP32 e assegura maior confiabilidade nas medições ambientais do sistema. 
